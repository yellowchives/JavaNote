# 日志

## 日志简介

### 日志概述

​	只要程序员投身在实际的学习和生产环境中，就会对日志的重要性有着充分的认知，尤其是对于web以及更高的应用，在很多情况下，日志可能是我们了解应用如何执行的唯一方式。

​	但是是现实很多程序员对于日志的记录的认知比较肤浅，日为日志的记录输出是一件很简单而且自动发生的事情，所以会经常忽略和日志相关的问题。

​	索引本课程主要就是针对于对于日志概念以及日志的框架不太熟悉的这类开发人群，更加详细且真实的体会日志为我们在开发和生产环境当中所带来的好处。

​	java语言的强大之处就是因为它强大而且成熟的生态体系。其中包括日志框架，就有很多成熟的开源资源可以直接使用。

### 日志文件

​	日志文件是用于记录系统操作时间的文件集合。

​	日志文件它具有处理历史数据、诊断问题的追踪以及理解系统的活动等重要的作用。



#### 调试日志

​	在软件开发中，我们要经常的调试程序，或者做一些状态的输出，便于我们查询程序的运行状况，为了让我们能够更加灵活且放拜年的控制这些调试信息，我们肯定是需要更加专业的日志技术，我们平时在调试程序的过程所使用的肯定就是专业开发工具自带的debug功能，可以实时查看程序运行情况。不能够有效保存运行情况的信息。调试的日志是能够更加方便的重现这些问题。

#### 系统日志

​	系统日志是用来记录系统中硬件、软件和系统相关问题的信息，同时还可以监视系统中发生的事件。用户可以通过它来检查错误发生的原因，或者寻找受到攻击时留下的痕迹。

​	系统日志包括系统日志、应用日志和完全日志这几种分类。

### 日志框架



#### 日志框架的作用

1. 控制日志输出的内容和格式。
2. 控制日志输出的位置。
3. 日志文件文件相关的优化，如异步操作、归档、压缩..
4. 日志系统的维护
5. 面向接口开发-日志的门面



#### 日志框架的价值

​	因为软件系统发展到了今天非常的复杂，特别是服务器的软件，涉及到的知识和内容问题非常的多。对于日志记录来讲，在某些方面使用别人研发好的成熟框架，这就相当于让别人帮你完成一些基础的工作。你只需要集中尽力去完成业务逻辑就可以了。

​	比如事物处理，日志记录等一些完全性的问题，我们使用框架去做不会影响业务的开发效率。	

​	同时框架是在不断升级的，我们可以不断的享受框架为我们带来的好处。

#### 市面流行的日志框架

- JUL java util logging 
  - Java 原生日志框架，亲儿子。

- Log4j
  - Apache 的一个开源项目。

- Logback
  - Log4j之父做的另一个开源项目
  - 业界称为log4j后浪
  - 一个可靠、通用且灵活的java日志框架
- log4j2
  - llog4j官方的第二个版本，各个放方面都是与logback及其相似具有插件式结构、备至文件优化等特征
  - springBoot1.4版本以后就不再支持log4j，所以第二个版本运营而成。
- JCL
- SLF4J 

#### 1.3.4日志门面和日志实现的区别

日志框架技JUL、logback、Log4j、Log4j2

用来方便有效地记录日志信息

日志门面技术JCL、SLF4J

为什么要使用日志门面技术：

每一种日志框架都有自己单独的API，要使用对应的框架就要使用对应的API，这就大大的增加了应用成代码对日志框架的耦合性。

我们使用日志门面技术之后，对于应用程序来说，无论底层的日志框架如何改变，应用程序不需要修改人意一行代码，就可以上线了。

## JUL

![](日志.assets/Snipaste_2022-02-03_21-24-08.png)

1. Logger：被叫做记录器，程序获取 Logger 对象，调用其 api 来发布日志信息。 Logger 通常被认为是访问日志系统的入口程序。
2. Handler/appender：处理器，每个 Logger 都会关联一个或是一组 Handler，Logger 会将日志交给关联的 Handler 处理，由 Handler 负责将日志做记录。 Handler 决定日志的输出位置，调用哪个格式化组件。
3. Filter：决定哪些信息会被记录，哪些会被略过。
4. Formatter：格式化组件。决定了日志的输出格式。
5. Level：每条日志消息都有一个关联的级别，我们根据输出级别的设置，用来展现最终呈现的日志信息。

## log4j

1. Loggers：相当于 JUL 的 Logger 加上 Level
2. Appenders：相当于 JUL 的Handler
3. Layout：相当于Formatter，但是功能更强大

log4j 的 Loggers 也有父子关系，root 是所有 Logger 的父亲。
